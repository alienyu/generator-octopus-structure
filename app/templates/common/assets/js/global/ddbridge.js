!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.DDBridge=n():e.DDBridge=n()}(this,function(){return function(e){function n(r){if(i[r])return i[r].exports;var t=i[r]={exports:{},id:r,loaded:!1};return e[r].call(t.exports,t,t.exports,n),t.loaded=!0,t.exports}var i={};return n.m=e,n.c=i,n.p="",n(0)}([function(e,n,i){"use strict";function r(e){if(e&&e.__esModule)return e;var n={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n["default"]=e,n}var t=i(1),o=i(2),a=r(o),s={};s.Version="0.1.2",(0,t.initGlobalAPI)(s),s.utils=a,e.exports=s},function(e,n,i){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function t(e){o(e),s(e),a(e),(0,p.initApp)(e),(0,d.initShare)(e),(0,l.initIS)(e),(0,v.initPay)(e),c(e)}function o(e){e.call=function(e,n,i){var r=g["default"].api[e],t=(0,f.makeBridgeFn)(e,r);return!i&&(0,u.isFn)(n)&&(i=n,n={}),t(n,i)}}function a(e){e.support=function(n,i){if(!p.inApp||!e[n])return!1;var r=e[n].support;return!(r&&!(0,p.compareAppVersion)(i||p.app.version,">=",r))}}function s(e){(0,u.each)(g["default"].api,function(n,i){e[i]=(0,f.makeBridgeFn)(i,n),e[i].support=n.support})}function c(e){u.isAndroid?(e.on=function(e,n){u.events.on(e,n)},e.off=function(e,n){u.events.un(e,n)},e._trigger=u.events.emit):(e.on=f.registerHandler,e.off=u.noop)}Object.defineProperty(n,"__esModule",{value:!0}),n.initGlobalAPI=t;var u=i(2),f=i(6),p=i(8),d=i(9),l=i(10),v=i(11),h=i(12),g=r(h)},function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=i(3);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return r[e]}})});var t=i(4);Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return t[e]}})});var o=i(5);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(n,e,{enumerable:!0,get:function(){return o[e]}})})},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=n.UA=window.navigator.userAgent.toLowerCase(),r=n.isAndroid=/android/i.test(i),t=n.isIOS=/iphone os/i.test(i),o=/iphone os ([\d_]+)/i,a=/android ([\d\.]+)/i;n.iosVersion=function(){var e="";if(t){var n=i.match(o);e=n[1]}return e.replace(/_/g,".")}(),n.androidVersion=function(){var e="";if(r){var n=i.match(a);e=n[1]}return e}()},function(e,n){"use strict";function i(e,n){return Object.prototype.toString.call(e)==="[object "+n+"]"}function r(e){return i(e,"Function")}function t(e){return i(e,"String")}function o(e){return i(e,"Object")}function a(e){return i(e,"Array")}function s(e){return i(e,"Undefined")}function c(e,n,i){if(e&&r(n))if(i=i||e,a(e)){for(var t=0,s=e.length;t<s;t++)if(n.call(i,e[t],t,e)===!1)return}else if(o(e))for(var c in e)if(n.call(i,e[c],c,e)===!1)return}function u(e){return e.replace(d,f)}function f(e,n){return n?n.toUpperCase():""}function p(){}Object.defineProperty(n,"__esModule",{value:!0}),n.isFn=r,n.isStr=t,n.isObj=o,n.isArray=a,n.isUndefined=s,n.each=c,n.camelize=u,n.noop=p;var d=/_(\w)/g},function(e,n){"use strict";function i(e,n){var i=e[0],r=e[1];n=e[2].concat(n);try{return i.apply(r,n)}catch(t){setTimeout(function(){throw t},0)}}function r(e,n){for(var i=new Array(n);n--;)i[n]=e[n];return i}function t(e){var n=o[e];if(!n)return!0;for(var t=n.cbs.length,a=r(n.cbs,t),s=!0,c=arguments.length,u=Array(c>1?c-1:0),f=1;f<c;f++)u[f-1]=arguments[f];for(var p=0;p<t;p++)a[p]&&(s=i(a[p],u)!==!1&&s);return!!s}Object.defineProperty(n,"__esModule",{value:!0});var o={};n.events={on:function(e,n,r){var t=o[e];t||(o[e]=t={args:null,cbs:[]});for(var a=arguments.length,s=Array(a>3?a-3:0),c=3;c<a;c++)s[c-3]=arguments[c];var u=[n,r,s],f=t.args;f?i(u,f):t.cbs.push(u)},un:function(e,n){var i=o[e];if(!i)return!0;if(1===arguments.length)i.cbs=[];else for(var r=i.cbs,t=r.length;t--;)r[t]&&r[t][0]===n&&r.splice(t,1)},emit:function(e,n){return t.apply(this,arguments)},done:function(e){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=o[e];a||(o[e]=a={args:i,cbs:[]});var s=a.cbs,c=s.length;t.apply(this,arguments),a.args=i,a.cbs=s.slice(c)},undo:function(e){var n=o[e];return!!n&&void(n.args=null)}}},function(e,n,i){"use strict";function r(){(0,c.isUndefined)(window.DidiJSBridge)?document.addEventListener("DidiJSBridgeReady",t,!1):window.DidiJSBridge.init&&window.DidiJSBridge.init()}function t(){window.DidiJSBridge.init&&window.DidiJSBridge.init(),(0,c.each)(f,function(e){e(window.DidiJSBridge)})}function o(e){(0,c.isUndefined)(window.DidiJSBridge)?f.push(e):e(window.DidiJSBridge)}function a(e,n){return function(){var i=arguments.length<=0||void 0===arguments[0]?"":arguments[0],r=arguments.length<=1||void 0===arguments[1]?c.noop:arguments[1];1===arguments.length&&(0,c.isFn)(i)&&(r=i,i="");var t=n?n.fn:e;(0,u.supportPrompt)()?(0,u.promptSend)(t,i,r):o(function(e){e.callHandler(t,i,function(e){(0,c.isStr)(e)&&(e=JSON.parse(e)),r(null,e)})})}}function s(e,n){o(function(i){i.registerHandler(e,n)})}Object.defineProperty(n,"__esModule",{value:!0}),n.makeBridgeFn=a,n.registerHandler=s;var c=i(2),u=i(7),f=[];r()},function(e,n,i){"use strict";function r(){(0,s.isUndefined)(window.didi)||(0,s.isUndefined)(window.didi.bridge)?((0,s.isUndefined)(window.didi)&&(window.didi={}),window.didi.bridge={},window.didi.bridge._callback=t):window.didi.bridge._callback=t}function t(e){(0,s.isStr)(e)&&(e=JSON.parse(e));var n=e,i=n.id,r=n.result,t=f[i];(0,s.isFn)(t)&&t(null,r)}function o(e,n,i){var r=u++,t=JSON.stringify({cmd:e,id:r,params:n});f[r]=i,window.prompt(t)}function a(){return s.isAndroid&&(0,c.compareAppVersion)(">","4.2.0")}Object.defineProperty(n,"__esModule",{value:!0}),n.promptSend=o,n.supportPrompt=a;var s=i(2),c=i(8),u=0,f={};r()},function(e,n,i){"use strict";function r(e){var i=u.UA.match(f),r=p,t=p;i&&(r=i[1],t=i[2]);var o=u.isIOS?"ios":u.isAndroid?"android":p,a=u.isIOS?u.iosVersion:u.isAndroid?u.androidVersion:p;e.app=n.app=d={env:r,version:t,system:o,sysVersion:a}}function t(){return d.env&&d.env!==p}function o(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];switch(n.length){case 2:return s(d.version,n[0],n[1]);case 3:return s.apply(null,n)}}function a(){for(var e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];switch(n.length){case 2:return s(d.sysVersion,n[0],n[1]);case 3:return s.apply(null,n)}}function s(e,n,i){return e=c(e),i=c(i),n.indexOf("=")!==-1&&e===i||(n.indexOf(">")!==-1&&e>i||n.indexOf("<")!==-1&&e<i)}function c(){var e=arguments.length<=0||void 0===arguments[0]?"":arguments[0];e=e.split("."),e.length=4;var n=[];return(0,u.each)(e,function(e){e=1*e,e?n.push(e>=10?e:"0"+e):n.push("00")}),parseInt(n.join(""),10)}Object.defineProperty(n,"__esModule",{value:!0}),n.app=void 0,n.initApp=r,n.inApp=t,n.compareAppVersion=o,n.compareSysVersion=a;var u=i(2),f=/didi\.(\w+)\/([\d\.]+)/,p="unknown",d=n.app={}},function(e,n,i){"use strict";function r(e){e.setShare=function(n,i){var r={entrance:{icon:"http://static.xiaojukeji.com/api/img/i-webview-entrance.png"},buttons:[]};u=n,n!==!1?((0,o.each)(s,function(e,i){n[i]!==!1&&r.buttons.push({type:a+i,name:e,data:t(n,i),callback:function(e){n.success&&n.success({from:"didi_passenger",to:i,status:"success",ret:e})}})}),n.refresh!==!1&&r.buttons.push({type:"page_refresh",name:"刷新"}),e.initEntrance(r),e.showEntrance()):e.hideEntrance(),(0,o.isFn)(i)&&i()},e.share=function(n,i){if(s[n]){var r=t(i||u),c=(0,o.camelize)(a+n);e[c].call(null,r)}}}function t(e,n){var i={};if((0,o.each)(c,function(r,t){i[r]=e[n+"_"+t]||e[t]||"","-1"!==r.indexOf("url")&&/^\/\//.test(i[r])&&(i[r]=window.location.protocol+i[r])}),e.revertAppmsgTitle===!0&&"weixin_appmsg"===n||"qq_appmsg"===n){var r=i.share_content;i.share_content=i.share_title,i.share_title=r}return i}Object.defineProperty(n,"__esModule",{value:!0}),n.initShare=r;var o=i(2),a="share_",s={weixin_timeline:"微信朋友圈",weixin_appmsg:"微信好友",sina_weibo:"新浪微博",qq_appmsg:"QQ",qzone:"QQ空间",alipay_friend:"支付宝好友",alipay_life:"支付宝朋友圈"},c={url:"share_url",title:"share_title",content:"share_content",img:"share_img_url",icon:"share_icon_url"},u={}},function(e,n,i){"use strict";function r(e){e.is=function(e){try{var n=t(e);return o(n)}catch(i){console.error(i.message)}}}function t(e){for(var n=e,i=[],r=void 0;n;){var t=void 0,o=p.exec(n);r&&!o||(o&&(n=n.slice(o[0].length)||n),t=[],i.push(t)),r=!1;var a=!0,s=!1;do{var g={};if(o=c.exec(n),!o){s=l;break}if(r=o.shift(),g.identity=r,n=n.slice(r.length),o=f.exec(n)){if(r=o.shift(),g.operator=r.trim(),n=n.slice(r.length),o=u.exec(n),!o){s=v;break}r=o.shift(),g.version=r,n=n.slice(r.length)}t.push(g),o=d.exec(n),o?(r=o.shift(),n=n.slice(r.length),a=!0):a=!1}while(a);if(s!==!1)throw new Error("the rule is error, "+h[s])}return i}function o(e){var n=!1;return(0,a.each)(e,function(e){var i=!0;(0,a.each)(e,function(e){var n=e.identity,r=e.operator,t=e.version,o=_[n];if(!o)throw new Error("unknown identity:"+n+"!");var a=!1,c=o.type;if(c===g?a=s.app.system===n:c===y&&(a=s.app.env===n),r&&a){var u=o.compare;i=i&&u(r,t)}else i=i&&a}),n=n||i}),n}Object.defineProperty(n,"__esModule",{value:!0}),n.initIS=r;var a=i(2),s=i(8),c=/^\w+/,u=/^[\d\._]+/,f=/^\s*[>=<]+\s*/,p=/^\s*,\s*/,d=/^\s*and\s*/,l=0,v=1,h=["identity is not valid","version is not valid"],g=0,y=1,_={passenger:{type:y,compare:s.compareAppVersion},driver:{type:y,compare:s.compareAppVersion},lite:{type:y,compare:s.compareAppVersion},ios:{type:g,compare:s.compareSysVersion},android:{type:g,compare:s.compareSysVersion}}},function(e,n,i){"use strict";function r(e){e.payWX=function(n){var i=arguments.length<=1||void 0===arguments[1]?t.noop:arguments[1];t.isAndroid?(e.payByWX(n),window.paybackWXA=function(e){i&&i(null,e)}):((0,o.registerHandler)("paybackWX",function(e){i&&i(null,e)}),e.payByWX(n))},e.payAli=function(n,i){t.isAndroid?(e.payByAli(n),window.paybackAlipay=function(e){i&&i(null,e)}):((0,o.registerHandler)("paybackAlipay",function(e){i&&i(null,e)}),e.payByAli(n))}}Object.defineProperty(n,"__esModule",{value:!0}),n.initPay=r;var t=i(2),o=i(6)},function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={debug:!1,api:{initEntrance:{fn:"init_entrance"},invokeEntrance:{fn:"invoke_entrance"},showEntrance:{fn:"show_entrance"},hideEntrance:{fn:"hide_entrance"},shareWeixinTimeline:{fn:"share_weixin_timeline"},shareWeixinAppmsg:{fn:"share_weixin_appmsg"},shareAlipayLife:{fn:"share_alipay_life"},shareAlipayFriend:{fn:"share_alipay_friend"},shareQzone:{fn:"share_qzone"},shareQqAppmsg:{fn:"share_qq_appmsg"},shareSinaWeibo:{fn:"share_sina_weibo"},getUserInfo:{fn:"getUserInfo",support:"3.9.5"},getSystemInfo:{fn:"getSystemInfo",support:"3.9.5"},getLocationInfo:{fn:"getLocationInfo",support:"3.9.5"},apolloGetToggle:{fn:"apolloGetToggle",support:"4.2"},refreshPage:{fn:"page_refresh"},closePage:{fn:"page_close"},payByWX:{fn:"payByWX"},payByAli:{fn:"payByAli"},setTitle:{fn:"updateNaviTitle"},getContacts:{fn:"getContacts"}}};n["default"]=i}])});
